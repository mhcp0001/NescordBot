# NescordBot - ç¬¬äºŒã®è„³ ğŸ§ 

**Discordä¸Šã§å‹•ä½œã™ã‚‹Personal Knowledge Management (PKM)ã‚·ã‚¹ãƒ†ãƒ **
éŸ³å£°èªè­˜ãƒ»AIçµ±åˆãƒ»ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã«ã‚ˆã‚‹ã€Œç¬¬äºŒã®è„³ã€ã‚’å®Ÿç¾

## âœ¨ Phase 4å®Œæˆ - ã‚ãªãŸã®çŸ¥è­˜ã‚’çµ±åˆã™ã‚‹æœ€å¼·Discord Bot

- ğŸ§  **AI Knowledge Graph**: å…¨ã¦ã®æƒ…å ±ã‚’é–¢é€£ä»˜ã‘ãƒ»è‡ªå‹•ãƒªãƒ³ã‚¯
- ğŸ” **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢**: ãƒ™ã‚¯ãƒˆãƒ« + ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®é«˜ç²¾åº¦æ¤œç´¢
- ğŸ¤ **99%ã‚³ã‚¹ãƒˆå‰Šæ¸›**: Gemini Audio APIã§æœˆ$5ä»¥ä¸‹ã®éŸ³å£°èªè­˜
- ğŸ·ï¸ **è‡ªå‹•åˆ†é¡**: AI powered ã‚¿ã‚°ä»˜ã‘ãƒ»ã‚«ãƒ†ã‚´ãƒªåŒ–
- ğŸ“ **Fleeting Note**: Discord â†” Obsidian ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹çµ±åˆ

## æ©Ÿèƒ½

### Phase 4: Personal Knowledge Management (PKM) ğŸ§  âœ…å®Œæˆ
ã€Œç¬¬äºŒã®è„³Botã€ã¨ã—ã¦é€²åŒ– - Discordä¸Šã§ã®é«˜æ©Ÿèƒ½PKMã‚·ã‚¹ãƒ†ãƒ 

- ğŸ§  **Knowledge Management**: AI-powered Personal Knowledge Graph
- ğŸ” **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢**: ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ + ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã®é«˜ç²¾åº¦çµ±åˆ
- ğŸ·ï¸ **è‡ªå‹•ã‚¿ã‚°ä»˜ã‘**: Gemini AI ã«ã‚ˆã‚‹è‡ªå‹•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†é¡ãƒ»ã‚«ãƒ†ã‚´ãƒªåŒ–
- ğŸ”— **ãƒãƒ¼ãƒˆãƒªãƒ³ã‚¯**: é–¢é€£æ€§ãƒ™ãƒ¼ã‚¹è‡ªå‹•ãƒªãƒ³ã‚¯ç”Ÿæˆãƒ»ã‚°ãƒ©ãƒ•åŒ–
- ğŸ“ **Fleeting Note**: Discord â†” PKM ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹çµ±åˆ
- ğŸ¯ **ãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸**: AI ã«ã‚ˆã‚‹é–¢é€£ãƒãƒ¼ãƒˆçµ±åˆãƒ»é‡è¤‡è§£æ¶ˆ
- ğŸ”„ **åŒæœŸç®¡ç†**: SQLite â†” ChromaDB åŒæ–¹å‘åŒæœŸ
- ğŸ¤ **Gemini Audio**: éŸ³å£°èªè­˜ã‚³ã‚¹ãƒˆ99%å‰Šæ¸›ï¼ˆæœˆ$5ä»¥ä¸‹é”æˆï¼‰

### Phase 3: çµ±åˆåŸºç›¤æ©Ÿèƒ½ âœ…å®‰å®šç¨¼åƒ
- ğŸ¤ **éŸ³å£°æ–‡å­—èµ·ã“ã—**: Gemini Audio API (primary) + Whisper (fallback)
- ğŸ“ **Obsidian GitHubçµ±åˆ**: ãƒãƒ¼ãƒˆâ†’GitHubè‡ªå‹•åŒæœŸãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
- ğŸ” **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: XSS/ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å®Œå…¨é˜²å¾¡
- ğŸ—ƒï¸ **æ°¸ç¶šåŒ–ã‚­ãƒ¥ãƒ¼**: SQLite-backedé«˜ä¿¡é ¼æ€§å‡¦ç†ãƒ»ãƒãƒƒãƒæœ€é©åŒ–
- ğŸ”— **GitHubé€£æº**: Issue/PRè‡ªå‹•ç®¡ç†ãƒ»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±åˆ
- ğŸ›¡ï¸ **APIåˆ¶é™ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: Gemini â†” OpenAI è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Phase 4: PKM Architecture ğŸ§ 
**ã€Œç¬¬äºŒã®è„³ã€å®Ÿç¾ã®ãŸã‚ã®AIçµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**

- **Vector Database**: ChromaDB (in-memory + persistent)
- **AI Embeddings**: Gemini text-embedding-004 (primary) + OpenAI ada-002 (fallback)
- **Audio Processing**: Gemini Audio API (99%ã‚³ã‚¹ãƒˆå‰Šæ¸›) + Whisper (fallback)
- **Search Engine**: Enhanced RRF (Reciprocal Rank Fusion) Algorithm
- **Knowledge Graph**: NetworkX-basedé–¢é€£æ€§ã‚°ãƒ©ãƒ•ãƒ»ãƒ‘ã‚¹æ¢ç´¢
- **Sync Management**: SQLite â†” ChromaDBåŒæ–¹å‘åŒæœŸ

### Core Infrastructure
- **Language**: Python 3.11+ (async/await complete)
- **Framework**: discord.py 2.3+ (slash commands + views)
- **Database**: SQLite (structured) + ChromaDB (vectors) hybrid
- **AI Services**: Gemini 1.5 Pro + GPT-3.5/4.0 (fallback)
- **Process Management**: Async service container + dependency injection

### Phase 3: çµ±åˆåŸºç›¤ âœ…
- **GitHubçµ±åˆ**: ObsidianGitHubService + GitHubAuthManager
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: SecurityValidator (XSS/ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–)
- **æ°¸ç¶šåŒ–**: PersistentQueue + Dead Letter Queue
- **ãƒãƒƒãƒå‡¦ç†**: BatchProcessor + éåŒæœŸã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°
- **Gitæ“ä½œ**: GitOperationService (å®‰å…¨æ€§ä¿è¨¼)

### DevOps & Quality
- **CI/CD**: GitHub Actions (40%åŠ¹ç‡åŒ–é”æˆ)
- **ç’°å¢ƒçµ±ä¸€**: Docker (dev/CI/prodå®Œå…¨ä¸€è‡´)
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Railwayè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ (100%å®‰å®šåŒ–)
- **ãƒ†ã‚¹ãƒˆ**: pytest + pytest-xdist (78%ã‚«ãƒãƒ¬ãƒƒã‚¸ç¶­æŒ)
- **ä¸¦åˆ—å‡¦ç†**: pytest-xdist ã«ã‚ˆã‚‹é«˜é€Ÿãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ

#### Phase 4: PKMå¯¾å¿œç’°å¢ƒ
- **Python 3.11 ä»¥ä¸Š** (async/awaitå®Œå…¨å¯¾å¿œ)
- **Poetry** (ä¾å­˜é–¢ä¿‚ç®¡ç†ãƒ»ä»®æƒ³ç’°å¢ƒ)
- **Gemini API Key** (PKMãƒ»éŸ³å£°èªè­˜ãƒ»åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ)
- **ChromaDB** (ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ - è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
- **Discord Bot Token** (Discordçµ±åˆ)

#### è¿½åŠ ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **OpenAI API Key** (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ - çœç•¥å¯)
- **FFmpeg** (éŸ³å£°å‡¦ç† - Whisperãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ™‚å¿…è¦)
- **GitHub CLI** (é–‹ç™ºãƒ»GitHubçµ±åˆç”¨)

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone https://github.com/yourusername/nescordbot.git
cd nescordbot
```

2. Poetryã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆï¼‰
```bash
# å…¬å¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ï¼ˆæ¨å¥¨ï¼‰
curl -sSL https://install.python-poetry.org | python3 -

# ã¾ãŸã¯ pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install poetry
```

3. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Poetry ãŒä»®æƒ³ç’°å¢ƒã‚’è‡ªå‹•ä½œæˆã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
poetry install
```

4. ä»®æƒ³ç’°å¢ƒã«å…¥ã‚‹ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
```bash
# Poetry ã‚·ã‚§ãƒ«ã‚’èµ·å‹•
poetry shell

# ã¾ãŸã¯ã€poetry run ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
poetry run python src/bot.py
```

4. FFmpegã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Windows (Chocolatey)
choco install ffmpeg

# Mac (Homebrew)
brew install ffmpeg

# Linux (apt)
sudo apt update && sudo apt install ffmpeg
```

5. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
```bash
cp .env.example .env
# å¿…é ˆè¨­å®š
nano .env  # ã¾ãŸã¯å¥½ã¿ã®ã‚¨ãƒ‡ã‚£ã‚¿ã§ç·¨é›†
```

**å¿…é ˆè¨­å®šä¾‹:**
```env
# Discord Bot
DISCORD_TOKEN=your_discord_bot_token

# Phase 4 PKMæ©Ÿèƒ½
GEMINI_API_KEY=your_gemini_api_key

# ChromaDB (PKM)
CHROMADB_PERSIST_DIRECTORY=./data/chromadb
PKM_ENABLED=true

# ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ (çœç•¥å¯)
OPENAI_API_KEY=your_openai_key  # Geminiåˆ¶é™æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
```

6. GitHub CLI ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆé–‹ç™ºç”¨ï¼‰
```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆï¼‰
# Windows (Scoop)
scoop install gh

# macOS
brew install gh

# Linux/WSL
curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null
sudo apt update && sudo apt install gh

# èªè¨¼
gh auth login
```

7. Botã‚’èµ·å‹•
```bash
# æ¨å¥¨: Poetry scriptsã‚’ä½¿ç”¨ (Phase 3ã§æœ€é©åŒ–æ¸ˆã¿)
poetry run start

# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å½¢å¼ã§ã®å®Ÿè¡Œ
poetry run python -m nescordbot

# ä»£æ›¿å®Ÿè¡Œæ–¹æ³•
poetry run python src/nescordbot/__main__.py

# Poetry ã‚·ã‚§ãƒ«å†…ã§
poetry shell
python -m nescordbot
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

### Phase 4 å®Ÿè£…æ¸ˆã¿æ§‹é€ 
```
NescordBot/
â”œâ”€â”€ src/nescordbot/           # ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚   â”œâ”€â”€ __main__.py          # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ bot.py               # NescordBotã‚¯ãƒ©ã‚¹ (DiscordåŸºç›¤)
â”‚   â”œâ”€â”€ main.py              # BotRunnerãƒ»ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†
â”‚   â”œâ”€â”€ config.py            # BotConfig (çµ±åˆè¨­å®šç®¡ç†)
â”‚   â”œâ”€â”€ logger.py            # ãƒ­ã‚°ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ cogs/                # Discordã‚³ãƒãƒ³ãƒ‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ general.py       # ä¸€èˆ¬ã‚³ãƒãƒ³ãƒ‰ (/help, /status)
â”‚   â”‚   â”œâ”€â”€ admin.py         # ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ (/logs, /config)
â”‚   â”‚   â”œâ”€â”€ voice.py         # éŸ³å£°å‡¦ç† (Gemini/Whisper)
â”‚   â”‚   â”œâ”€â”€ pkm.py          # ğŸ§  PKMä¸­æ ¸æ©Ÿèƒ½ (/note, /search, /mergeç­‰)
â”‚   â”‚   â”œâ”€â”€ text.py         # ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†ãƒ»Obsidiançµ±åˆ
â”‚   â”‚   â”œâ”€â”€ github.py       # GitHubæ“ä½œãƒ»Issueç®¡ç†
â”‚   â”‚   â””â”€â”€ api_status.py   # APIä½¿ç”¨é‡ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç›£è¦–
â”‚   â”‚
â”‚   â””â”€â”€ services/            # Phase 4 ã‚µãƒ¼ãƒ“ã‚¹å±¤
â”‚       â”œâ”€â”€ service_container.py    # DIãƒ»ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†
â”‚       â”‚
â”‚       # PKM Core Services ğŸ§ 
â”‚       â”œâ”€â”€ knowledge_manager.py    # ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†ãƒ»çµ±åˆæ¤œç´¢
â”‚       â”œâ”€â”€ search_engine.py        # ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
â”‚       â”œâ”€â”€ chromadb_service.py     # ãƒ™ã‚¯ãƒˆãƒ«DBçµ±åˆ
â”‚       â”œâ”€â”€ embedding.py            # GeminiåŸ‹ã‚è¾¼ã¿ç”Ÿæˆ
â”‚       â”œâ”€â”€ sync_manager.py         # SQLiteâ†”ChromaDBåŒæœŸ
â”‚       â”œâ”€â”€ note_processing.py      # ãƒãƒ¼ãƒˆå‡¦ç†ãƒ»æ§‹é€ åŒ–
â”‚       â”‚
â”‚       # Linking & Graph Services ğŸ”—
â”‚       â”œâ”€â”€ link_graph_builder.py   # ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•æ§‹ç¯‰
â”‚       â”œâ”€â”€ link_suggestor.py       # é–¢é€£æ€§ãƒ™ãƒ¼ã‚¹ææ¡ˆ
â”‚       â”œâ”€â”€ link_validator.py       # ãƒªãƒ³ã‚¯å¦¥å½“æ€§æ¤œè¨¼
â”‚       â”‚
â”‚       # API Management ğŸ›¡ï¸
â”‚       â”œâ”€â”€ token_manager.py        # APIä½¿ç”¨é‡ç®¡ç†
â”‚       â”œâ”€â”€ fallback_manager.py     # APIåˆ¶é™æ™‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
â”‚       â”œâ”€â”€ api_monitor.py          # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
â”‚       â”‚
â”‚       # Audio Processing ğŸ¤
â”‚       â””â”€â”€ transcription/          # éŸ³å£°èªè­˜ã‚µãƒ¼ãƒ“ã‚¹
â”‚           â”œâ”€â”€ base.py            # åŸºåº•ã‚¯ãƒ©ã‚¹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚           â”œâ”€â”€ gemini.py          # Gemini Audio API
â”‚           â””â”€â”€ whisper.py         # OpenAI Whisper (fallback)
â”‚       â”‚
â”‚       # Phase 3 åŸºç›¤ã‚µãƒ¼ãƒ“ã‚¹ âœ…
â”‚       â”œâ”€â”€ database.py             # DatabaseService
â”‚       â”œâ”€â”€ persistent_queue.py     # PersistentQueue + Dead Letter
â”‚       â”œâ”€â”€ batch_processor.py      # ãƒãƒƒãƒå‡¦ç†ãƒ»æœ€é©åŒ–
â”‚       â”œâ”€â”€ git_operations.py       # Gitæ“ä½œãƒ»å®‰å…¨æ€§ä¿è¨¼
â”‚       â”œâ”€â”€ github_auth.py          # GitHubèªè¨¼ç®¡ç†
â”‚       â”œâ”€â”€ obsidian_github.py      # Obsidian GitHubçµ±åˆ
â”‚       â””â”€â”€ migrations.py           # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒç®¡ç†
â”‚
â”œâ”€â”€ tests/                   # åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ unit/               # å˜ä½“ãƒ†ã‚¹ãƒˆ (å„ã‚µãƒ¼ãƒ“ã‚¹)
â”‚   â”œâ”€â”€ integration/        # çµ±åˆãƒ†ã‚¹ãƒˆ (APIé€£æº)
â”‚   â”œâ”€â”€ fixtures/           # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ¢ãƒƒã‚¯
â”‚   â””â”€â”€ conftest.py        # pytestå…±é€šè¨­å®š
â”‚
â”œâ”€â”€ data/                   # æ°¸ç¶šåŒ–ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ chromadb/          # ChromaDBãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ nescordbot.db      # SQLiteæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ temp/              # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ« (éŸ³å£°å‡¦ç†ç­‰)
â”‚
â”œâ”€â”€ docs/                   # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ .github/workflows/      # CI/CDè‡ªå‹•åŒ– (GitHub Actions)
â”œâ”€â”€ Dockerfile             # ã‚³ãƒ³ãƒ†ãƒŠåŒ–ç’°å¢ƒ
â”œâ”€â”€ pyproject.toml         # Poetryä¾å­˜é–¢ä¿‚ãƒ»è¨­å®š
â”œâ”€â”€ poetry.lock            # ä¾å­˜é–¢ä¿‚ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ .env                   # ç’°å¢ƒå¤‰æ•°è¨­å®š
```

### ğŸ“Š Phase 4å®Ÿè£…çŠ¶æ³
- **Core PKM Services**: 19/27 ã‚¿ã‚¹ã‚¯å®Œäº† (70.4%)
- **API Integration**: Gemini + ChromaDB çµ±åˆå®Œæˆ
- **Search Engine**: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£…
- **Knowledge Graph**: è‡ªå‹•ãƒªãƒ³ã‚¯ãƒ»ã‚°ãƒ©ãƒ•åŒ–æ©Ÿèƒ½å®Ÿè£…
- **Audio Processing**: Gemini Audio APIçµ±åˆ (99%ã‚³ã‚¹ãƒˆå‰Šæ¸›)

## ãƒ‡ãƒ—ãƒ­ã‚¤

### Railway ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

1. [Railway](https://railway.app) ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ
2. GitHubãƒªãƒã‚¸ãƒˆãƒªã¨é€£æº
3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼ˆWeb UIä¸Šã§ï¼‰
4. è‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãŒé–‹å§‹ã•ã‚Œã¾ã™

Railwayç”¨ã®è¨­å®šï¼š
- `runtime.txt` ã§Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š
- `pyproject.toml` ã¨ `poetry.lock` ã§ä¾å­˜é–¢ä¿‚ã‚’ç®¡ç†
- GitHub Actionsã§è‡ªå‹•çš„ã« `requirements.txt` ã‚’ç”Ÿæˆ
- `Procfile` ã§ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’æŒ‡å®š

### AWS/GCP ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# PM2ã§ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ï¼ˆNode.jså¿…è¦ï¼‰
pm2 start src/bot.py --interpreter python3 --name nescordbot

# ã¾ãŸã¯ systemd ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦
sudo nano /etc/systemd/system/nescordbot.service
```

### Dockerã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```dockerfile
FROM python:3.11-slim

# Poetry ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN pip install poetry

WORKDIR /app

# ä¾å­˜é–¢ä¿‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
COPY pyproject.toml poetry.lock* ./

# ä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‰ãšã«ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN poetry config virtualenvs.create false \
    && poetry install --no-interaction --no-ansi

COPY . .
CMD ["python", "src/bot.py"]
```

## ä½¿ã„æ–¹

### Phase 4: PKM (Personal Knowledge Management) ğŸ§ 

ã€Œç¬¬äºŒã®è„³ã€ã¨ã—ã¦ã®ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†æ©Ÿèƒ½ - ã™ã¹ã¦ã®æƒ…å ±ã‚’çµ±åˆãƒ»æ¤œç´¢ãƒ»é–¢é€£ä»˜ã‘

#### ğŸ“ ãƒãƒ¼ãƒˆç®¡ç†
```
/note create <ã‚¿ã‚¤ãƒˆãƒ«> <å†…å®¹>     # æ–°è¦ãƒãƒ¼ãƒˆä½œæˆ
/note get <ãƒãƒ¼ãƒˆID>              # ãƒãƒ¼ãƒˆè©³ç´°è¡¨ç¤º
/note update <ãƒãƒ¼ãƒˆID> <æ–°å†…å®¹>  # ãƒãƒ¼ãƒˆæ›´æ–°
/note delete <ãƒãƒ¼ãƒˆID>           # ãƒãƒ¼ãƒˆå‰Šé™¤
/note tag <ãƒãƒ¼ãƒˆID> <ã‚¿ã‚°>       # æ‰‹å‹•ã‚¿ã‚°ä»˜ã‘
```

#### ğŸ” ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢
```
/search <ã‚¯ã‚¨ãƒª>                  # ãƒ™ã‚¯ãƒˆãƒ« + ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰çµ±åˆæ¤œç´¢
/search --mode vector <ã‚¯ã‚¨ãƒª>    # ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã®ã¿
/search --mode keyword <ã‚¯ã‚¨ãƒª>   # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã®ã¿
/search --limit 20 <ã‚¯ã‚¨ãƒª>       # çµæœæ•°æŒ‡å®š
```

#### ğŸ“Š ãƒãƒ¼ãƒˆä¸€è¦§ãƒ»ç®¡ç†
```
/list                            # å…¨ãƒãƒ¼ãƒˆä¸€è¦§
/list --tag <ã‚¿ã‚°å>             # ã‚¿ã‚°åˆ¥ãƒ•ã‚£ãƒ«ã‚¿
/list --recent 10                # æœ€æ–°Nä»¶
/list --created_after 2024-01-01 # æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿
```

#### ğŸ”— é–¢é€£æ€§ãƒ»ãƒªãƒ³ã‚¯æ©Ÿèƒ½
```
/link suggest <ãƒãƒ¼ãƒˆID>          # é–¢é€£ãƒãƒ¼ãƒˆè‡ªå‹•ææ¡ˆ
/link validate <ãƒãƒ¼ãƒˆID>         # ãƒªãƒ³ã‚¯å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯
/link graph <ãƒãƒ¼ãƒˆID>            # ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•è¡¨ç¤º
/link path <ãƒãƒ¼ãƒˆA> <ãƒãƒ¼ãƒˆB>    # ãƒãƒ¼ãƒˆé–“ãƒ‘ã‚¹æ¢ç´¢
```

#### ğŸ¯ é«˜åº¦ãªæ©Ÿèƒ½
```
/merge <ãƒãƒ¼ãƒˆID1> <ãƒãƒ¼ãƒˆID2>    # AI ã«ã‚ˆã‚‹é–¢é€£ãƒãƒ¼ãƒˆçµ±åˆ
/auto_tag suggest <ãƒãƒ¼ãƒˆID>      # AI ã‚¿ã‚°ææ¡ˆ
/auto_tag apply <ãƒãƒ¼ãƒˆID>        # AI ã‚¿ã‚°è‡ªå‹•é©ç”¨
/auto_tag batch --tag <ã‚¿ã‚°>      # ãƒãƒƒãƒè‡ªå‹•ã‚¿ã‚°ä»˜ã‘
```

### Phase 3: åŸºç›¤æ©Ÿèƒ½ âœ…

#### ä¸€èˆ¬ã‚³ãƒãƒ³ãƒ‰
- `/help` - å…¨æ©Ÿèƒ½ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
- `/status` - ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ»APIä½¿ç”¨çŠ¶æ³
- `/ping` - å¿œç­”é€Ÿåº¦ãƒ»ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æ¸¬å®š

#### éŸ³å£°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç† ğŸ¤
1. **Discordã§éŸ³å£°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éŒ²éŸ³** â†’ é€ä¿¡
2. **è‡ªå‹•èªè­˜**: Gemini Audio API (99%ã‚³ã‚¹ãƒˆå‰Šæ¸›) ã«ã‚ˆã‚‹é«˜ç²¾åº¦æ–‡å­—èµ·ã“ã—
3. **AIå‡¦ç†**: å†…å®¹æ•´å½¢ãƒ»è¦ç´„ãƒ»æ§‹é€ åŒ–
4. **çµ±åˆä¿å­˜**: PKMã‚·ã‚¹ãƒ†ãƒ ã¸ã®è‡ªå‹•çµ±åˆ + ObsidianåŒæœŸ
5. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–**: ãƒœã‚¿ãƒ³ã§ã‚¿ã‚°ä»˜ã‘ãƒ»é–¢é€£ä»˜ã‘ãƒ»å…±æœ‰ãŒå¯èƒ½

#### ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç† ğŸ“
1. **é•·æ–‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: è‡ªå‹•çš„ã«Fleeting Noteã¨ã—ã¦ã‚­ãƒ£ãƒ—ãƒãƒ£
2. **AIåˆ†æ**: è‡ªå‹•ã‚¿ã‚°ä»˜ã‘ãƒ»ã‚«ãƒ†ã‚´ãƒªåŒ–ãƒ»é–¢é€£ãƒãƒ¼ãƒˆææ¡ˆ
3. **GitHubçµ±åˆ**: Obsidianå½¢å¼ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

## é–‹ç™º

### é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```bash
# 1. åˆ©ç”¨å¯èƒ½ãªIssueã‚’ç¢ºèª
gh issue list --label "help wanted" --state open

# 2. Issueã‹ã‚‰é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
gh issue develop 123 --name "feature/123-new-feature" --base main

# 3. é–‹ç™ºãƒ»ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat: æ–°æ©Ÿèƒ½ã‚’å®Ÿè£… (refs #123)"

# 4. PRã‚’ä½œæˆï¼ˆè‡ªå‹•ã§Issueã¨ãƒªãƒ³ã‚¯ï¼‰
git push
gh pr create --fill --web  # æœ¬æ–‡ã« "Closes #123" ã‚’å«ã‚ã‚‹

# 5. è‡ªå‹•ãƒãƒ¼ã‚¸è¨­å®šï¼ˆCIé€šéå¾Œï¼‰
gh pr merge --auto --squash --delete-branch
```

### ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«

```bash
# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
poetry run black src/

# Linting
poetry run flake8 src/

# Import ã®ã‚½ãƒ¼ãƒˆ
poetry run isort src/

# å‹ãƒã‚§ãƒƒã‚¯
poetry run mypy src/
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
poetry run pytest tests/

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
poetry run pytest --cov=src tests/
```

### ä¾å­˜é–¢ä¿‚ã®ç®¡ç†

```bash
# æ–°ã—ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ 
poetry add package-name

# é–‹ç™ºç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ 
poetry add --group dev package-name

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
poetry update

# requirements.txt ã‚’ç”Ÿæˆï¼ˆäº’æ›æ€§ã®ãŸã‚ï¼‰
poetry export -f requirements.txt --output requirements.txt --without-hashes
```

### æ–°ã—ã„Cogã®è¿½åŠ 

1. `src/cogs/` ã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
2. `commands.Cog` ã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã‚’å®šç¾©
3. `bot.py` ã§Cogã‚’èª­ã¿è¾¼ã¿

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### éŸ³å£°èªè­˜ãŒå‹•ä½œã—ãªã„

1. OpenAI APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. FFmpegãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ç¢ºèªï¼ˆogg, mp3, wavå¯¾å¿œï¼‰

### ImportError: No module named 'discord'

```bash
# Poetryç’°å¢ƒã§å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
poetry add discord-py@latest
```

### Bot ãŒèµ·å‹•ã—ãªã„

1. Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª: `python --version`
2. ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ­£ã—ã„ã‹ç¢ºèª
3. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆbot.logï¼‰ã‚’ç¢ºèª

## ç’°å¢ƒå¤‰æ•°

### å¿…é ˆè¨­å®š
```env
# Discord Bot
DISCORD_TOKEN=your_discord_bot_token

# AI Services (Phase 4å®Ÿè£…)
GEMINI_API_KEY=your_gemini_api_key          # PKMæ©Ÿèƒ½ãƒ»éŸ³å£°èªè­˜ç”¨
OPENAI_API_KEY=your_openai_api_key          # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨
```

### Phase 4: PKMæ©Ÿèƒ½è¨­å®š
```env
# ChromaDB (ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢)
CHROMADB_PERSIST_DIRECTORY=./data/chromadb
CHROMADB_COLLECTION_NAME=nescord_knowledge

# PKMæ©Ÿèƒ½èª¿æ•´
PKM_ENABLED=true
PKM_HYBRID_SEARCH_ALPHA=0.5                # ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã®é‡ã¿
PKM_MAX_RESULTS=10
PKM_AUTO_TAG_ENABLED=true

# Gemini APIä½¿ç”¨é‡åˆ¶é™
GEMINI_MONTHLY_LIMIT=1000000               # æœˆé–“ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶é™
```

### Phase 3: GitHubçµ±åˆè¨­å®š
```env
# GitHubçµ±åˆ
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_REPO_OWNER=repository_owner_name
GITHUB_REPO_NAME=repository_name
GITHUB_BASE_BRANCH=main

# Obsidian GitHubçµ±åˆ
GITHUB_OBSIDIAN_ENABLED=true
GITHUB_OBSIDIAN_BASE_PATH=obsidian_sync
GITHUB_OBSIDIAN_BRANCH=main
GITHUB_OBSIDIAN_BATCH_SIZE=10
GITHUB_OBSIDIAN_BATCH_INTERVAL=300

# ãƒ­ãƒ¼ã‚«ãƒ«Obsidiançµ±åˆ
OBSIDIAN_VAULT_PATH=/path/to/obsidian/vault
```

### ä¸€èˆ¬è¨­å®š
```env
# Botå‹•ä½œè¨­å®š
LOG_LEVEL=INFO
MAX_AUDIO_SIZE_MB=25
SPEECH_LANGUAGE=ja

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
DATABASE_URL=sqlite:///app/data/nescordbot.db

# APIåˆ¶é™ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
TRANSCRIPTION_PROVIDER=gemini              # gemini, whisper
EMBEDDING_PROVIDER=gemini                  # gemini, openai
```

## è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼

1. Forkã™ã‚‹
2. Feature branchã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. Commitã™ã‚‹ (`git commit -m 'Add amazing feature'`)
4. Pushã™ã‚‹ (`git push origin feature/amazing-feature`)
5. Pull Requestã‚’ä½œæˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ä½œè€…

- GitHub: [@yourusername](https://github.com/yourusername)

## è¬è¾

- [discord.py](https://discordpy.readthedocs.io/) - Discord API wrapper
- [OpenAI](https://openai.com/) - Whisper & GPT APIs
- ã™ã¹ã¦ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼
